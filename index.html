<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Word Bomb Learner</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root {
  --bg: radial-gradient(circle at top, #1a1f3c, #0b0d1a);
  --card: rgba(255,255,255,0.08);
  --text: #e8e8ff;
  --accent: #7f8cff;
}

body.light {
  --bg: #ffffff;
  --card: #f2f2f2;
  --text: #111;
  --accent: #5b6cff;
}

body.dark {
  --bg: #000;
  --card: #111;
  --text: #eee;
  --accent: #888;
}

body {
  margin: 0;
  min-height: 100vh;
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
}

.container {
  background: var(--card);
  padding: 20px;
  border-radius: 16px;
  width: min(420px, 90%);
  box-shadow: 0 20px 40px rgba(0,0,0,.4);
}

h1 {
  margin-top: 0;
  text-align: center;
}

input, select, button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  border-radius: 8px;
  border: none;
  font-size: 16px;
}

button {
  background: var(--accent);
  color: #000;
  font-weight: bold;
  cursor: pointer;
}

.word {
  padding: 6px;
  border-bottom: 1px solid rgba(255,255,255,.1);
}

mark {
  background: var(--accent);
  color: #000;
  border-radius: 4px;
  padding: 0 2px;
}

.footer {
  margin-top: 10px;
  text-align: center;
  font-size: 12px;
  opacity: .6;
}
.notice {
  font-size: 12px;
  color: #f55;
  text-align: center;
  margin-bottom: 10px;
}
</style>
</head>

<body>
<div class="container">
  <div class="notice">
    To use the site properly, please request access here: 
    <a href="https://cors-anywhere.herokuapp.com/corsdemo" target="_blank" style="color: var(--accent);">CORS Demo</a>
  </div>

  <h1>Word Bomb Learner</h1>

  <input id="pattern" placeholder="Enter letters">

  <select id="matchMode">
    <option value="contains">Contains</option>
    <option value="starts">Starts With</option>
  </select>

  <select id="listMode">
    <option value="casual">Casual Words</option>
    <option value="long">Long Words Only</option>
    <option value="hyphen">Hyphen Only</option>
  </select>

  <select id="theme" onchange="setTheme(this.value)">
    <option value="original">Original</option>
    <option value="dark">Dark</option>
    <option value="light">Light</option>
  </select>

  <div id="results"></div>

  <div class="footer">
    Made by r2ya¹ — Ctrl to refresh active list
  </div>
</div>

<script>
let mainWords = [];
let hyphenWords = [];
let cache = [];
let activeList = 'casual';

fetch("csw15.txt").then(r=>r.text()).then(t=>{
  mainWords = t.split(/\r?\n/).filter(Boolean);
});

fetch("hyphen-dict.txt").then(r=>r.text()).then(t=>{
  hyphenWords = t.split(/\r?\n/).filter(Boolean);
});

const pattern = document.getElementById("pattern");
const matchMode = document.getElementById("matchMode");
const listMode = document.getElementById("listMode");
const results = document.getElementById("results");

pattern.addEventListener("input", findWords);
listMode.addEventListener("change", ()=>{ 
  activeList = listMode.value; 
  findWords(); 
});
matchMode.addEventListener("change", findWords);

document.addEventListener("keydown", e=>{
  if(e.key === "Control") randomize();
});

function setTheme(t){
  document.body.className = t === "original" ? "" : t;
}

function highlight(word, p){
  if(!p) return word;
  const r = new RegExp(p, "ig");
  return word.replace(r, m=>`<mark>${m}</mark>`);
}

function randomize(){
  if(cache.length) cache = cache.sort(()=>Math.random() - 0.5);
  render(cache);
}

function findWords(){
  const p = pattern.value.toLowerCase();
  const match = matchMode.value;

  let source;
  if(activeList === "hyphen") source = hyphenWords;
  else if(activeList === "long") source = mainWords.filter(w=>w.length >= 8);
  else source = mainWords; // casual

  cache = source.filter(w=>{
    if(match === "starts") return w.startsWith(p);
    return w.includes(p);
  }).slice(0,30);

  render(cache);
}

function render(words){
  results.innerHTML = words.map(w => 
    `<div class="word">${highlight(w, pattern.value)}</div>`
  ).join("");
}
</script>
</body>
</html>
